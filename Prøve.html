<!DOCTYPE
html >
  <html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prøve Program</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --background-color: #ecf0f1;
            --text-color: #333;
        }

        body {
            font-family: 'Inter', 'Helvetica Neue', sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        #forside, #prøveSide {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        #forside {
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }

        .start-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            width: 90%;
            max-width: 400px;
        }

        .input-container {
            width: 100%;
            margin-bottom: 20px;
        }

        #studentName {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 6px;
            box-sizing: border-box;
        }

        .exam-title {
            margin-top: 10px;
            font-size: 16px;
            color: var(--primary-color);
            text-align: center;
        }

        #startButton {
            padding: 15px 35px;
            font-size: 18px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
            width: 100%;
            opacity: 0.6;
            pointer-events: none;
        }

        #startButton.active {
            opacity: 1;
            pointer-events: auto;
        }

        #startButton.active:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        #prøveSide {
            display: none;
            flex-direction: column;
        }

        #menu {
            width: 100%;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #menu ul {
            list-style-type: none;
            padding: 0;
            display: flex;
            justify-content: center;
            margin: 0;
        }

        #menu li {
            padding: 10px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            border-radius: 4px;
        }

        #menu li:hover, #menu li.active {
            background-color: var(--secondary-color);
        }

        #content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        #opgaveContainer, #skrivefelt {
            width: 50%;
            height: 100%;
            padding: 20px;
            box-sizing: border-box;
        }

        #opgaveContainer {
            background-color: #f4f6f7;
            overflow-y: auto;
            border-right: 1px solid #d1d8e0;
        }

        #skrivefelt {
            background-color: white;
            position: relative;
        }

        #timer {
            position: fixed;
            top: 10px;
            right: 10px;
            font-size: 16px;
            color: var(--text-color);
            background-color: rgba(255,255,255,0.8);
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        #gemPDF {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 12px 25px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        #gemPDF:hover {
            background-color: var(--primary-color);
            transform: translateY(-2px);
        }

        .ql-container {
            height: 100%;
            border: none !important;
        }

        .ql-toolbar {
            border-bottom: 1px solid #e0e0e0 !important;
        }

        #opgaveFormulering {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            white-space: pre-line;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
            margin-top: 20px;
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Help icon styles */
        #helpIcon {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 30px;
            height: 30px;
            background-color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 100;
        }

        #helpModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .close-button {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
            color: #777;
        }

        .close-button:hover {
            color: #333;
        }

.download-container {
    margin-top: 20px;
    text-align: center;
}

.download-btn {
    background-color: var(--secondary-color);
    color: white;
    border: none;
    border-radius: 6px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.download-btn:hover {
    background-color: var(--primary-color);
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.phrase-box {
    background-color: #f8f9fa;
    border: 1px solid #e2e8f0;
    border-radius: 6px;
    padding: 15px;
    margin: 15px 0;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.phrase {
    background-color: #e2e8f0;
    padding: 5px 10px;
    border-radius: 4px;
    font-style: italic;
}

.story-container {
    background-color: #fff;
    border: 1px solid #e2e8f0;
    border-radius: 6px;
    padding: 20px;
    margin-top: 20px;
    max-height: 300px;
    overflow-y: auto;
    font-size: 14px;
    line-height: 1.6;
    transition: all 0.3s ease;
}

.story-container h3 {
    margin-top: 0;
    color: var(--primary-color);
    border-bottom: 1px solid #e2e8f0;
    padding-bottom: 10px;
    margin-bottom: 15px;
}

.toggle-story {
    background-color: var(--secondary-color);
    color: white;
    border: none;
    border-radius: 6px;
    padding: 8px 15px;
    font-size: 14px;
    cursor: pointer;
    margin-top: 15px;
    transition: all 0.3s ease;
}

.toggle-story:hover {
    background-color: var(--primary-color);
}

.sub-menu {
    display: none;
    background-color: #f39c12;
    padding: 10px;
    border-radius: 0 0 8px 8px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    position: absolute;
    z-index: 100;
    width: 150px;
}

.sub-menu li {
    padding: 8px 15px;
    cursor: pointer;
    transition: background-color 0.3s;
    border-radius: 4px;
    margin: 5px 0;
    background-color: #e67e22;
    color: white;
    font-weight: bold;
}

.sub-menu li:hover {
    background-color: #d35400;
    color: white;
}

.footer {
    position: absolute;
    bottom: 20px;
    color: white;
    font-size: 14px;
    opacity: 0.8;
}
    </style>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
</head>
<body>
    <div id="forside">
        <div class="start-container">
            <div class="input-container">
                <input type="text" id="studentName" placeholder="Indtast dit navn eller StudieID" />
                <div class="exam-title">Engelsk B - HF (marts, 2025)</div>
            </div>
            <button id="startButton">Start Prøve</button>
        </div>
        <div id="helpIcon">?</div>
    <div class="footer">Lavet af: BrianHS - kontakt@brianhs.dk</div>
</div>

    <div id="helpModal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Vejledning til opgavesættet</h2>
            <p>Du skal besvare følgende opgaver:</p>
            <p>Assignment 1-6</p>
            <p>I assignment 6 skal du vælge enten A, B eller C</p>
            <p>Tekster til assignment 6:</p>
            <p>6 A – Fiction:<br>
            "The Gift", a short story by Karen Phillips, 2017.</p>
            <p>6 B – Non-fiction:<br>
            The texts focus on cross-sex friendships<br>
            "Men and women can never be friends – but sex has nothing to do with it", an article by Radhika Sanghani,<br>
            The Telegraph website, 2017.<br>
            "Can Men and Women Be Just Friends?", a video clip with Julian Huguet from SoulPancake website, 2014.</p>
            <p>6 C – Fiction:<br>
            "I'm going to Mum's", a short film by Lauren Jackson, YouTube website, 2012.</p>
            <h3>Vejledning og skabelon til at løse opgaven</h3>
            <p>Den samlede eksaminationstid for assignment 1-6 er 5 timer. Besvarelsen bedømmes som en helhed ud fra de faglige mål for niveauet. Der lægges vægt på beherskelsen af det engelske sprog, forståelse af forlægget og færdighed i skriftlig fremstilling på engelsk.</p>
            <p>Det anbefales, at du skriver din besvarelse i skabelonen, som ligger under Template i menuen til venstre. Besvarelsen afleveres i ét dokument med opgaverne i rækkefølgen 1-6.</p>
        </div>
    </div>

    <div id="prøveSide">
        <div id="menu">
            <ul>
                <li class="opgave" data-opgave="1">Opgave 1</li>
                <li class="opgave" data-opgave="2">Opgave 2</li>
                <li class="opgave" data-opgave="3">Opgave 3</li>
                <li class="opgave" data-opgave="4">Opgave 4</li>
                <li class="opgave" data-opgave="5">Opgave 5</li>
                <li class="opgave" data-opgave="6" id="opgave6">Opgave 6</li>
            </ul>
        </div>
        <ul class="sub-menu" id="opgave6SubMenu">
            <li class="sub-opgave" data-opgave="6a">Opgave 6a</li>
            <li class="sub-opgave" data-opgave="6b">Opgave 6b</li>
            <li class="sub-opgave" data-opgave="6c">Opgave 6c</li>
        </ul>
        <div id="content">
            <div id="opgaveContainer">
                <div id="opgaveFormulering">
                    <p id="opgaveTekst">Vælg en opgave fra menuen.</p>
                </div>
                <div id="videoContainer"></div>
                <div id="storyContainer" style="display: none;"></div>
            </div>
            <div id="skrivefelt">
                <div id="editor"></div>
            </div>
        </div>
        <div id="timer">Tid tilbage: 1 time</div>
        <button id="gemPDF">Gem som PDF</button>
    </div>

    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script>
        let timer;
        let timeLeft = 3600; // 1 time i sekunder
        let studentNameValue = ""; // Variable to store student name
        let storyVisible = false; // Track if story is visible

        const editor = new Quill('#editor', {
            theme: 'snow',
            modules: {
                clipboard: {
                    matchVisual: false
                }
            }
        });

        // Forhindre indsættelse af uformateret tekst
        editor.clipboard.addMatcher(Node.TEXT_NODE, (node, delta) => {
            const regex = /^[\s\n]+$/;
            if (regex.test(node.textContent)) {
                return delta;
            }
            return new delta().insert(node.textContent.trim());
        });

        // Tilføj mulighed for at overføre markeret tekst
        document.getElementById('opgaveFormulering').addEventListener('mouseup', function() {
            const selectedText = window.getSelection().toString().trim();
            if (selectedText) {
                // Indsæt teksten direkte uden bekræftelse
                editor.insertText(editor.getLength() - 1, selectedText);
            }
        });

        // Allow transferring selected text from the story container to the editor
        document.addEventListener('mouseup', function(event) {
            const storyContainer = document.getElementById('storyContainer');
            if (storyContainer && storyContainer.style.display !== 'none' && storyContainer.contains(event.target)) {
                const selectedText = window.getSelection().toString().trim();
                if (selectedText) {
                    // Insert the selected text at the current cursor position
                    const range = editor.getSelection();
                    if (range) {
                        editor.insertText(range.index, selectedText);
                    } else {
                        editor.insertText(editor.getLength() - 1, selectedText);
                    }
                }
            }
        });

        // Check student name input and enable/disable start button
        document.getElementById('studentName').addEventListener('input', function() {
            const nameInput = this.value.trim();
            const startButton = document.getElementById('startButton');
            
            if (nameInput.length > 0) {
                startButton.classList.add('active');
                studentNameValue = nameInput; // Store the name
            } else {
                startButton.classList.remove('active');
                studentNameValue = "";
            }
        });

        document.getElementById('startButton').addEventListener('click', function() {
            // Only proceed if the button is active (name is entered)
            if (this.classList.contains('active')) {
                document.getElementById('forside').style.display = 'none';
                document.getElementById('prøveSide').style.display = 'flex';
                document.getElementById('gemPDF').style.display = 'block';
                startTimer();
            }
        });

        // Help icon functionality
        document.getElementById('helpIcon').addEventListener('click', function() {
            document.getElementById('helpModal').style.display = 'flex';
        });

        // Close modal when clicking the X
        document.querySelector('.close-button').addEventListener('click', function() {
            document.getElementById('helpModal').style.display = 'none';
        });

        // Close modal when clicking outside the content
        document.getElementById('helpModal').addEventListener('click', function(event) {
            if (event.target === this) {
                this.style.display = 'none';
            }
        });

        // Handle main menu clicks
document.querySelectorAll('.opgave').forEach(function(opgave) {
    opgave.addEventListener('click', (event) => {
        const opgaveId = opgave.getAttribute('data-opgave');
        
        // Special handling for Opgave 6
        if (opgaveId === '6') {
            // Toggle sub-menu visibility
            const subMenu = document.getElementById('opgave6SubMenu');
            subMenu.style.display = subMenu.style.display === 'block' ? 'none' : 'block';
            
            // Position the sub-menu below the parent menu item
            const rect = opgave.getBoundingClientRect();
            subMenu.style.top = `${rect.bottom}px`;
            subMenu.style.left = `${rect.left}px`;
            
            // Prevent further processing
            event.stopPropagation();
            return;
        }
        
        // For other menu items, proceed as normal
        handleOpgaveSelection(opgaveId);
    });
});

// Handle sub-menu clicks
document.querySelectorAll('.sub-opgave').forEach(function(subOpgave) {
    subOpgave.addEventListener('click', (event) => {
        const opgaveId = subOpgave.getAttribute('data-opgave');
        handleOpgaveSelection(opgaveId);
        
        // Hide the sub-menu after selection
        document.getElementById('opgave6SubMenu').style.display = 'none';
        
        // Prevent event from bubbling up
        event.stopPropagation();
    });
});

// Close sub-menu when clicking elsewhere
document.addEventListener('click', function(event) {
    const subMenu = document.getElementById('opgave6SubMenu');
    if (subMenu.style.display === 'block' && !event.target.closest('#opgave6')) {
        subMenu.style.display = 'none';
    }
});

// Function to handle opgave selection
function handleOpgaveSelection(opgaveId) {
    // Remove 'active' class from all opgaver
    document.querySelectorAll('.opgave').forEach(op => op.classList.remove('active'));
    document.querySelectorAll('.sub-opgave').forEach(op => op.classList.remove('active'));
    
    // Add 'active' class to the selected opgave or sub-opgave
    if (opgaveId.length > 1) {
        // It's a sub-opgave
        document.querySelector(`[data-opgave="${opgaveId}"]`).classList.add('active');
        // Also highlight the parent menu
        document.getElementById('opgave6').classList.add('active');
    } else {
        // It's a main opgave
        document.querySelector(`[data-opgave="${opgaveId}"]`).classList.add('active');
    }
    
    // Update the opgave text
    document.getElementById('opgaveTekst').innerHTML = getOpgaveTekst(opgaveId);
    
    // Handle media content
    const videoContainer = document.getElementById('videoContainer');
    const storyContainer = document.getElementById('storyContainer');
    
    videoContainer.innerHTML = ''; // Clear previous content
    storyContainer.style.display = 'none'; // Hide story container by default
    storyContainer.innerHTML = ''; // Clear previous content
    
    // Handle specific opgave content
    if (opgaveId === '2') {
        // Add YouTube video for opgave 2
        videoContainer.innerHTML = `
            <div class="video-container">
                <iframe width="560" height="315" src="https://www.youtube.com/embed/jm2ekl2agyM"
                frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media;
                gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>`;
    } else if (opgaveId === '5') {
        // Add image for opgave 5
        videoContainer.innerHTML = '<img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/image-5Z2qyT2BxJBVuUn5NWP52y5qw7ReB7.png" alt="Man reading newspaper on commute" style="max-width:100%; border-radius:8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">';
    } else if (opgaveId === '6a') {
        // Prepare the story container for opgave 6a but don't show it yet
        storyContainer.innerHTML = `
            <div class="story-container">
                <h3>The Gift by Karen Phillips</h3>
                <p>"Hi, Mum. Dad's getting married." Elly runs through the back door, swings herself up onto the bench.</p>
                <p>"Who brought you home?" I ask, buying time while I absorb this piece of news that Ron didn't think to mention when I spoke to him a couple of weeks ago.</p>
                <p>"Amelia. Dad's still milking. What'll you give them for a present?"</p>
                <p>"I don't know. When's the wedding?"</p>
                <p>"Soon, I think."</p>
                <p>"How many times have I asked you not to sit on the bench?"</p>
                <p>Elly slides down, turns her bubble gum over in her mouth. "So, what will you give them?"</p>
                <p>"I need to think about it." What's the etiquette regarding this? Does the ex-wife buy a present for the next wife?</p>
                <p>"Amelia's painted the back-door pink. It's her favourite colour."</p>
                <p>"Pink? What did Dad say about that?"</p>
                <p>"He likes it. Better than boring old brown."</p>
                <p>I remember the mud-tide that crept up the door as everyone kicked their gumboots off so that they collapsed at odd angles on the old wooden floorboards like wounded bodies on a battlefield.</p>
                <p>"Amelia's got this rack where we all put our boots."</p>
                <p>"Even Dad?"</p>
                <p>"Of course. Her gumboots are pink with black spots."</p>
                <p>"Pink's a nice, cheerful colour," I say in the non-judgemental voice recommended by experts when your child talks about the new woman in your ex-husband's life.</p>
                <p>"Dad and Amelia are going to Bali for their honeymoon."</p>
                <p>"Bali?" [...]</p>
                <p>She lifts the lid off the pot on the stove. "What's this? It looks disgusting."</p>
                <p>"Soup."</p>
                <p>"Amelia's cooking salmon for Dad tonight."</p>
                <p>"You should have stayed there for dinner then."</p>
                <p>Elly slams the lid back onto the pot. "Why are you so grumpy? I don't even like salmon."</p>
                <p>Elly told me that Ron met Amelia at the health food shop where his doctor sent him to buy something for the cracks on his hands – testimony to our cold, wet winters. Shortly afterwards, Elly reported that Amelia was growing flowers in my old vegetable garden. "All colours, Mum. You'd like them. She makes different creams with them."</p>
                <p>The farm's a hard taskmaster for someone on their own, but I didn't expect Ron to find my replacement quite so quickly, and somehow I thought he would choose a stronger, less tired version of me. Instead, he's chosen Amelia of the pink back door and expensive salmon dinners. Amelia who never goes near the milking shed, says Elly. No one warns you that divorce turns you into a spy. Quizzing the kids about the time they spent on the farm with their father was a no-no according to the "surviving divorce" books I was reading back then, but I mentally pounced on every fact they volunteered, storing it away for future use as a crocodile stores drowned prey under a muddy bank for a future meal. Soon after she moved under the covers of my old bed, I bumped into Amelia with Ron at the supermarket. I could see that Ron was uncomfortable with these two parts of his life almost colliding between the cereals and the jams. I don't know what I expected her to look like. I knew from Elly that Amelia was younger than I am, but I didn't expect the roundness, the bright scarf poured down her back or the scarlet boots. There was no resemblance to me at all. After a few muttered words about the road repairs in the main street, Ron dragged her away. I stood by myself in the aisle, consumed not with animosity towards her but curiosity about Ron and me. How can two people live together, create two beautiful children, but never really know one another? He's probably saying the same words to her that he did to me – words like love and forever. I'm not sure that I believe them anymore.</p>
                <p>We met at a party. Ron had come up to town for some forgotten reason, so tagged along with a cousin. The sense that he had of his own direction pulled me from my smorgasbord of university subjects like iron filings to a magnet. His parents helped us onto a dairy farm close to them. Even I, a city girl through and through, could appreciate that it was a beautiful piece of land resting in a cradle of bush-clad hills. We worked hard. Another man would have been content, but no matter how good the season was, Ron's dreams were always bigger than our income. The farm was a hole that could never be filled.</p>
                <p>"We'll lease a run-off for some extra dry stock next year," Ron said one evening after a day spent separating young calves from their mothers. [...]</p>
                <p>"I don't want a bigger farm. I want us to sell this one and move to town."</p>
                <p>"What would I do in town?" Ron asked.</p>
                <p>"Get a regular job with regular pay. I hate how we're always in debt."</p>
                <p>"It's the only way to grow."</p>
                <p>"And I'm tired of working in the shed."</p>
                <p>Ron walked out of the kitchen, slammed the door behind him.</p>
                <p>"I'll get a job and my wages can pay for a worker," I yelled at his departing back. I didn't see him again until I went to the milking shed next morning.</p>
                <p>"Can I come with you when the worker gets here?" Elly quietly sidled up to me in the kitchen when I ducked back from the shed to check that the kids were getting ready for school. She slipped her hand into mine and I knew that she had overheard us the night before. There was almost nothing on the farm that Ron and I between us couldn't repair, but neither of us knew how to mend the growing holes in our relationship. Our arguments were as corrosive as rust, silently eating away at both of us, but now dark bubbles had broken through the skin of our days.</p>
                <p>We dismantled our marriage as flood waters slid towards the road during my second winter as receptionist at our local vet clinic. It's a busy practice – each day brings different animals and their owners and salespeople. [...] Hours pass quickly, leaving no time for regrets and what ifs to enter my mind. With just Ron and me alone on the farm day after long day, I'd learned that marriage offers no guarantee against loneliness. When the flood waters drowned the road, a colleague offered me and the kids the flat under her house. By the time the water had receded, I knew that I would not go back to the farm.</p>
                <p>An unexpected calm fell after I'd made the decision not to return to the farm, as if we were fighters too exhausted to continue the war. When the noise died away we could hear each other's offers, not of reconciliation – we'd moved too far into hostile territory for that – but of compromise. There was no third party involved; the farm, although a silent tyrant, was exempt from all blame. Sometimes it felt as if we were actors and the script could change at any moment. It was hard to believe that what had begun in the fragrant warmth of summer in front of our old home was ending in an impersonal room and that I was the one ending it.</p>
                <p>In the lawyer's office, I often wanted to reach over to Ron and touch his hand. I wanted him to look at me with his crooked smile, raise an eyebrow and say, "Forget it. We can sort something out." In those moments I knew that I loved him more than I had for a long time. One evening he came around to the flat. I cooked dinner and we sat down to eat as a family, which we never did at the farm. Ron rarely finished before seven. After dinner, Ben and Elly went off to do their homework. Ron surfed through TV channels while I made us coffee. The kids kept finding reasons to come back into the lounge. I think they couldn't quite believe the tableau in front of them. I wanted to hold the moment, to say, "Can we talk?" But when he didn't find anything worth watching, Ron looked at the time then said, "Early bird catches the cows. I'm off." I watched his coffee grow cold.</p>
                <p>Guilt and relief combined to ensure that the divorce settlement was not in my favour. At times I hated Ron, but I also hated myself for what I had done. I had failed in the most important job – to make a happy home for my family. Ron was surly and the kids were miserable and it was my fault. Now months go by without Ron and me speaking, but I rang him two weeks ago to share my concern about Ben's plan to go mountain climbing over the summer holidays with what I argued was inadequate equipment.</p>
                <p>"He'll be fine," Ron said.</p>
                <p>"I want you to talk to him about it."</p>
                <p>"He knows my number," replied the man who would stay out on the farm all night with a sick cow in the days when I lived with him. I slammed the phone down but a few days later Ron rang back. Things were sorted with Ben. I was surprised that I'd forgotten how Ron shoves problems into some compartment in his brain until he's ready to think about them. I wanted to know exactly what equipment Ben was taking but I could hear Amelia saying something in the background. For the first time I didn't feel that she was an intruder in the house that I still owned.</p>
                <p>After our soup, Elly goes to her room to face her unopened homework. I ring Ben.</p>
                <p>"Did you know that Dad was getting married?" I ask.</p>
                <p>"Yep."</p>
                <p>"Why didn't you tell me?"</p>
                <p>"I thought you knew."</p>
                <p>"How do you feel about it?"</p>
                <p>"She's okay. A bit useless on the farm, but it'll be nice for Dad."</p>
                <p>A door slams in the background. Ben muffles the phone, blocks me out then comes back on.</p>
                <p>"Hey, Mum. We're just leaving. I'll ring you tomorrow night."</p>
                <p>I could choke on the number of words I've read about supporting children through their parents' divorce, but now, even in my worst moments when loneliness creeps in with the dark, I know that the kids are okay. Their scars are as faded as they ever will be.</p>
                <p>Amelia's interest in flowers reminds me of a painting hanging in our local art gallery. At a glance, it's simply an explosion of colour. Pinks and reds and yellows meld into shining dark blues and greens. My first impression was of a riot of blossom somewhere in the tropics, but from different angles or in a different light it could be a flotilla of nudibranchs in a southern ocean, or the deserts and mountains of the world as seen from a space shuttle. It's untitled so that viewers are left to interpret the shadows and shining ridges of colour for themselves. When I was at the farm I wanted to buy a piece of art to lighten the south-facing corner between the front door and our bedroom, but there were always things that we needed more – fencing wire, fertiliser, a new pump. The corner remained empty.</p>
                <p>Ron and I were not good for each other but without him there would be no Ben and Elly. I can't begin to imagine a life without them. Maybe if I'd hung in there we'd have reached a stage in life where we would go grocery shopping together or talk about holidays in Bali or perhaps Amelia has something that I lack [...]. I'll never know. [...] After school tomorrow I'll take Elly to look at it; although I think Amelia will like it, I no longer presume to know Ron's favourite colours. I'm not sure that I ever did.</p>
            </div>
        `;
    }
}

        // Function to get assignment text - this is where you can easily edit assignments
        function getOpgaveTekst(opgaveNummer) {
            // This is the configuration object for assignments
            // You can easily edit this object to change assignments
            const opgaver = {
                '1': `<strong>Opgave 1:</strong>

<U> Marker i nedenstående tekst alle verberne (udsagnsord) i præsens (nutid) – marker hvert ord tydligt med enten fed eller kursivering:</U>

The library is cool and smells like carpet cleaner, although all I can see is marble. I sign the Visitor's
Log: Clare Abshire, 11: 15 10 - 26 - 91 Special Collections. I have never been in the Newberry Library
before, and now that I have gotten past the dark, foreboding entrance I am excited. I have a sort of
Christmas - morning sense of the library as a big box full of beautiful books. The elevator is dimly lit,
almost silent. I stop on the third floor and fill out an application for a Reader's Card, then I go upstairs
to Special Collections. My boot heels rap the wooden floor. The room is quiet and crowded, full of
solid, heavy tables piled with books and surrounded by readers. Chicago autumn morning light shines
through the tall windows. I approach the desk and collect a stack of call slips. I am writing a paper for
an art history class. My research topic is the Kelmscott Press Chaucer. I look up the book itself and fill
out a call slip for it.

<U> Omskriv verberne til præteritum (datid)</U>`,

                '2': `<strong>Opgave 2:</strong>

<U>Se nedenstående video, og skriv eksempler på følgende ordklasser i nedenstående lydklip:</U>

4 adjektiver
4 pronominer
4 præpositioner
4 verber`,

                '3': `<strong>Opgave 3:</strong>

<U>Omskriv præpositionsforbindelserne til adverbier</U>

Omskriv præpositionsforbindelser til adverbier som vist i eksemplet:

<strong>Eksempel:</strong>
<I>He talked to me in a rather aggressive way.
He talked to me rather aggressively.</I>

1) A lot of shopping decisions occur in an automatic manner.
2) The paintbrush strokes the canvas in a beautiful way.
3) We were treated in a very generous manner throughout the week.
4) The children were all talking in a loud way.
5) The ingredients are combined in a perfect way.
6) Transformation is not something that happens in a sudden way.
7) He is not really taking criticism in a good way.`,

                '4': `<strong>Opgave 4:</strong>

<U>The sentences below, which are from two different texts, have been jumbled.</U>

<I>Connect the sentences so that they form two meaningful texts.</I>

a. If you find yourself suddenly gaining access to a time machine,
b. – and all of it for free.
c. that most social scientists, policymakers, and community leaders usually bring up
d. then congratulations; you're a science-fiction character.
e. Libraries are not the kinds of institutions
f. what's the first thing you'd do?
g. a citizen, a permanent resident, or even a convicted felon
h. but the desire to kill Hitler clinches it.
i. when they discuss social capital and how to build it.
j. If you said "kill Adolf Hitler",
k. But they offer something for everyone, regardless of whether they're
l. Actually, the whole "access to a time machine" thing suggested that already,`,

                '5': `<strong>Opgave 5:</strong>

<U>Write a text (50-75 words) to match the photo and include all the words from the list below. You are not
allowed to change the forms of the words.</U>

busy - news - commute - other - reading - daily - work`,
        '6a': `<strong>Opgave 6a:</strong>

<h3>Assignment A – Fiction</h3>

<U>1. Write a summary of "The Gift" in about 150 words.</U>
<U>2. Write a short analytical essay (at least 300 words) about "The Gift". You must focus on the narrator.</U>
Include the following analytical terms in your essay:
<I>relationship, setting, contrasts, the title</I>
Your essay must include references to the text.

<U>3. Taking your starting point in the short story, discuss what it takes to really get to know a person.</U>
<div class="phrase-box">
  <span class="phrase">on the one hand</span>
  <span class="phrase">although</span>
  <span class="phrase">since</span>
  <span class="phrase">on the other hand</span>
  <span class="phrase">likewise</span>
  <span class="phrase">yet</span>
  <span class="phrase">in spite of</span>
  <span class="phrase">to sum up</span>
</div>
Use at least two phrases from the box above in your discussion.

<h4>Material</h4>
Karen Phillips, "The Gift", 2017.

<button id="toggleStory" class="toggle-story">Show Story</button>
`,
        '6b': `<strong>Opgave 6b:</strong>

<h3>Assignment B – Non-fiction</h3>

<U>1. Write a summary of the article "Men and women can never be friends – but sex has nothing to do with it" in about 150 words.</U>

<U>2. Write a short analytical essay (at least 300 words) about the article and the video clip. Focus on the views on cross-sex friendships.</U>

<U>3. Taking your starting point in the article and the video clip, discuss to what extent men and women can be "just friends".</U>

<div class="phrase-box">
  <span class="phrase">on the one hand</span>
  <span class="phrase">although</span>
  <span class="phrase">since</span>
  <span class="phrase">on the other hand</span>
  <span class="phrase">likewise</span>
  <span class="phrase">yet</span>
  <span class="phrase">in spite of</span>
  <span class="phrase">to sum up</span>
</div>
Use at least two phrases from the box above in your discussion.

<h4>Material</h4>
<p>Radhika Sanghani, "Men and women can never be friends – but sex has nothing to do with it", The Telegraph website, 2017.</p>
<p>Julian Huguet, "Can Men and Women Be Just Friends?", SoulPancake website, 2014.</p>

<p><i>Note: Materials for this assignment are not yet available.</i></p>
`,
        '6c': `<strong>Opgave 6c:</strong>

<h3>Assignment C – Fiction</h3>

<U>1. Write a summary of the short film "I'm going to Mum's" in about 150 words.</U>

<U>2. Write a short analytical essay (at least 300 words) about the short film. Focus on the relationship between the father and his son.</U>

<U>3. Taking your starting point in the short film, discuss the challenges of being a parent after a divorce.</U>

<div class="phrase-box">
  <span class="phrase">on the one hand</span>
  <span class="phrase">although</span>
  <span class="phrase">since</span>
  <span class="phrase">on the other hand</span>
  <span class="phrase">likewise</span>
  <span class="phrase">yet</span>
  <span class="phrase">in spite of</span>
  <span class="phrase">to sum up</span>
</div>
Use at least two phrases from the box above in your discussion.

<h4>Material</h4>
<p>Lauren Jackson, "I'm going to Mum's", YouTube website, 2012.</p>

<p><i>Note: Materials for this assignment are not yet available.</i></p>
`
    };

    // Return the assignment text or default message
    return opgaver[opgaveNummer] || `Vælg en opgave fra menuen.`;
}

// Add event delegation for the toggle story button
document.addEventListener('click', function(event) {
    if (event.target && event.target.id === 'toggleStory') {
        const storyContainer = document.getElementById('storyContainer');
        const opgaveFormulering = document.getElementById('opgaveFormulering');
        storyVisible = !storyVisible;
        
        if (storyVisible) {
            storyContainer.style.display = 'block';
            event.target.textContent = 'Hide Story';
            // Make story container larger
            opgaveFormulering.style.height = '150px';
            opgaveFormulering.style.overflow = 'auto';
            storyContainer.style.height = 'calc(100% - 200px)';
            storyContainer.querySelector('.story-container').style.maxHeight = 'none';
            storyContainer.querySelector('.story-container').style.height = '100%';
        } else {
            storyContainer.style.display = 'none';
            event.target.textContent = 'Show Story';
            // Reset sizes
            opgaveFormulering.style.height = '';
            opgaveFormulering.style.overflow = '';
            storyContainer.style.height = '';
            storyContainer.querySelector('.story-container').style.maxHeight = '300px';
            storyContainer.querySelector('.story-container').style.height = '';
        }
    }
});

        function startTimer() {
            timer = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const timerDisplay = document.getElementById('timer');
            timerDisplay.innerText = `Tid tilbage: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            timerDisplay.style.color = timeLeft <= 600 ? 'red' : 'var(--text-color)';
            timeLeft--;

            if (timeLeft < 0) {
                clearInterval(timer);
                document.getElementById('gemPDF').style.display = 'block';
                timerDisplay.innerText = 'Tid udløbet!';
            }
        }

        // Ryd tekst ved browserlukning
        window.addEventListener('beforeunload', function(event) {
            if (timeLeft >= 0) {
                editor.setText('');
            }
        });

        document.getElementById('gemPDF').addEventListener('click', function() {
    savePDF();
});

function savePDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    
    // Get the HTML content from the editor to preserve formatting
    const editorContent = document.querySelector('.ql-editor').innerHTML;
    
    // Create a temporary div to render the HTML content
    const tempDiv = document.createElement('div');
    tempDiv.innerHTML = editorContent;
    document.body.appendChild(tempDiv);
    tempDiv.style.position = 'absolute';
    tempDiv.style.left = '-9999px';
    
    // Apply some basic styling to maintain formatting
    tempDiv.querySelectorAll('p').forEach(p => {
        p.style.margin = '0 0 10px 0';
    });
    
    tempDiv.querySelectorAll('strong, b').forEach(el => {
        el.style.fontWeight = 'bold';
    });
    
    tempDiv.querySelectorAll('em, i').forEach(el => {
        el.style.fontStyle = 'italic';
    });
    
    tempDiv.querySelectorAll('ul, ol').forEach(list => {
        list.style.paddingLeft = '20px';
        list.style.margin = '10px 0';
    });
    
    // Use html2canvas to capture the formatted content
    html2canvas(tempDiv).then(canvas => {
        // Remove the temporary div
        document.body.removeChild(tempDiv);
        
        // Add the canvas as an image to the PDF
        const imgData = canvas.toDataURL('image/png');
        const imgWidth = 190; // mm
        const pageHeight = 297; // A4 height
        const imgHeight = canvas.height * imgWidth / canvas.width;
        let heightLeft = imgHeight;
        let position = 0;
        
        doc.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);
        heightLeft -= (pageHeight - 20);
        
        // Add new pages if content overflows
        while (heightLeft > 0) {
            position = heightLeft - imgHeight;
            doc.addPage();
            doc.addImage(imgData, 'PNG', 10, position, imgWidth, imgHeight);
            heightLeft -= (pageHeight - 20);
        }
        
        // Add footer with date and time
        const now = new Date();
        const dateTimeString = `Genereret: ${now.toLocaleDateString('da-DK')} ${now.toLocaleTimeString('da-DK')}`;
        const pageCount = doc.internal.getNumberOfPages();
        
        for (let i = 1; i <= pageCount; i++) {
            doc.setPage(i);
            const pageHeight = doc.internal.pageSize.height;
            doc.setFontSize(8);
            doc.setTextColor(150, 150, 150);
            doc.text(dateTimeString, 10, pageHeight - 10);
        }
        
        // Use student name for the filename
        const filename = studentNameValue ? `${studentNameValue.replace(/\s+/g, '_')}.pdf` : 'besvarelser.pdf';
        doc.save(filename);
    });
}
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>

